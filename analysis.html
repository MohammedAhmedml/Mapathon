<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Satellite Analysis | Aligarh LULC</title>

<link rel="stylesheet" href="styles.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

<style>
#map {
  height: 600px;
  width: 92%;
  margin: 40px auto;
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
}

.legend {
  background: white;
  padding: 10px;
  border-radius: 8px;
  line-height: 1.6;
  font-size: 14px;
}

.legend div {
  display: flex;
  align-items: center;
}

.legend span {
  width: 18px;
  height: 18px;
  margin-right: 8px;
  display: inline-block;
}

.control-panel {
  width: 92%;
  margin: auto;
  text-align: center;
  margin-top: 20px;
}
</style>
</head>

<body>

<header class="navbar">
    <div class="nav-container">
        <a href="index.html" class="logo">ALIGARH GIS</a>
        <nav class="nav-links">
            <a href="index.html">Home</a>
            <a href="analysis.html" class="active">Analysis</a>
            <a href="lulc-data.html">LULC Data</a>
            <a href="team.html">Team</a>
        </nav>
    </div>
</header>

<section style="text-align:center; padding: 40px;">
    <h1>Interactive LULC & NDVI Map</h1>
    <p>Aligarh District (2000–2025)</p>
</section>

<div class="control-panel">
  <label>Select Year: </label>
  <select id="yearSelect">
    <option value="2000">2000</option>
    <option value="2010">2010</option>
    <option value="2020">2020</option>
    <option value="2025">2025</option>
  </select>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>

// Initialize map
var map = L.map('map').setView([27.8974, 78.0880], 11);

// Base layer
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© OpenStreetMap'
}).addTo(map);

// Simulated LULC Layers
var urbanLayer = L.circle([27.8974, 78.0880], { radius: 3000, color: "red" });
var vegetationLayer = L.circle([27.9100, 78.0700], { radius: 3500, color: "green" });
var waterLayer = L.circle([27.8800, 78.0600], { radius: 2000, color: "blue" });

// NDVI-style heat simulation
var ndviLayer = L.circle([27.9000, 78.0800], { radius: 4000, color: "darkgreen", fillOpacity: 0.4 });

// Layer control
var overlayMaps = {
  "Urban Area": urbanLayer,
  "Vegetation": vegetationLayer,
  "Water Body": waterLayer,
  "NDVI Layer": ndviLayer
};

L.control.layers(null, overlayMaps).addTo(map);

// Legend
var legend = L.control({position: 'bottomright'});
legend.onAdd = function () {
    var div = L.DomUtil.create('div', 'legend');
    div.innerHTML = `
        <div><span style="background:red"></span> Urban</div>
        <div><span style="background:green"></span> Vegetation</div>
        <div><span style="background:blue"></span> Water</div>
        <div><span style="background:darkgreen"></span> NDVI</div>
    `;
    return div;
};
legend.addTo(map);

// URL Parameter Handling
const params = new URLSearchParams(window.location.search);
const area = params.get("area");
const layer = params.get("layer");

// Area Zoom
const locations = {
  "urban": [27.8974, 78.0880],
  "vegetation": [27.9100, 78.0700],
  "water": [27.8800, 78.0600]
};

if (area && locations[area.toLowerCase()]) {
  map.setView(locations[area.toLowerCase()], 13);
}

// Auto Layer Activation
if (layer) {
  if (layer === "urban") urbanLayer.addTo(map);
  if (layer === "vegetation") vegetationLayer.addTo(map);
  if (layer === "water") waterLayer.addTo(map);
  if (layer === "ndvi") ndviLayer.addTo(map);
}

// Year change simulation
document.getElementById("yearSelect").addEventListener("change", function() {
  alert("Year changed to " + this.value + " (connect real raster layers here)");
});

</script>

</body>
</html>